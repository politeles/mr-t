This section introduces the framework of the ill-known contraints. First of all, some preliminary concepts about possibility theory is explained. Next to that, the representation of time intervals by using the presented framework is done. Finally, the evaluation of the Allen's relationships between a crisp time interval and a possibilistic time interval is provided.
 
\subsection{\label{subsec:possibilistic-variables}Possibilistic Variables}
Informally speaking, a possibilistic variable is a variable that takes only one value but that, for some reason, this value is unknown. This is rather usual for historical events. For example, the conquest of Granada by the Christians' kings took place on February of 1492, but the exact day is not precissely known.
A more formal definition of possibilistic variables is given as follows.
%Possibilistic variables rely on possibility theory \cite{Dubois1988a}. A \emph{possibilistic variable} is defined as follows \cite{Pons2011}.

\begin{definition}
\label{def:ill-known-value}
A possibilistic variable \cite{Dubois1988a}, \cite{Pons2011} $X$ over a universe $U$ is defined as a variable taking exactly one value in $U$. A possibility distribution $\pi_X$ on $U$ is defined and models the available knowledge about the value that $X$ takes: for each $u\in U$, $\pi_X(u)$ represents the possibility that $X$ takes the value $u$. In this work, this possibility is interpreted as a measure of how plausible it is that $X$ takes the value $u$, given (partial) knowledge about the value $X$ takes.
\end{definition}

The exact value a possibilistic variable takes, which is (partially) unknown, is called an \emph{ill-known value} in this work \cite{Dubois1988a}.

An \emph{ill-known-set} \cite{Dubois1988a} is a possibilistic variable defined on the powerset $\Pow(U)$ of the universe $U$. 

%When a possibilistic variable is defined on the powerset $\Pow(R)$ of some universe $R$, the unique value the variable takes will be a crisp set and its possibility distribution on the powerset $\Pow(R)$ will describe the possibility of each crisp subset of $R$ to be the value the variable takes. This exact value (a crisp set) the variable takes, is now called an \emph{ill-known set} \cite{Dubois1988a}.


% A specific application of possibilistic variables is obtained when the universe under consideration is the set of Boolean values $\mathbb{B}$ = $\{T,F\}$. Indeed, any Boolean proposition $p$ takes just one value in $\mathbb{B}$. If the knowledge about which value this proposition $p$ will take is given by a possibility distribution $\pi_p$, the proposition can be seen as a possibilistic variable. As the interest lies with the case where the proposition holds, the possibility and necessity that $p$ = $T$ (the proposition holds) demand most attention. This possibility and necessity is noted here as:
% \begin{align}
% \text{Possibility that $p$ = $T$ (p holds):}  & Pos(p) = \pi_p(T) \label{propholdsposs} \\
% \text{Necessity that $p$ = $T$ (p holds):}  & Nec(p) = 1-\pi_p(F) \label{propholdsnecc}
% \end{align}

% This work will deal with ill-known intervals. These are ill-known sets, defined and represented via a start and end point, which will be ill-known values. The elements of the set are the values between the start and end point. A closed ill-known interval with start point defined by possibilistic variable $X$ and end point by possibilistic variable $Y$ is noted here $\left[X, Y\right]$. The correspondences and transitions between the representations of ill-known sets, between the representations of ill-known intervals and between the representations of an ill-known set and an ill-known interval are part of the authors current research.

\subsection{\label{subsec:fuzzy-numbers}Fuzzy Numbers and Fuzzy Intervals}
A fuzzy set is a set for which its elements have a degree of membership. Among others, Dubois and Prade~\cite{Dubois1983} use fuzzy sets \cite{Zadeh1965} to define a \emph{fuzzy interval}:
\begin{definition}
A fuzzy interval is a fuzzy set $M$, defined by a membership function $\mu_{M}$, on the set of real numbers $\mathbb{R}$ such that:
\begin{eqnarray}
\mu_{M} : & \mathbb{R} \rightarrow \left[0,1\right] \nonumber \\ 
\label{eq:convexity}
\forall (u,v)\in\mathbb{R}^2: \forall w \in [u,v]:& \\
\nonumber
\mu_M(w) \geq\min(\mu_M(u),\mu_M(v))  \\
\label{eq:unicity}
\exists m \in \mathbb{R} : &  \mu_M(m)=1 
\end{eqnarray}
\end{definition}
If this modal value $m$ is unique, then $M$ is referred to as a \emph{fuzzy number}. In other words, if the core of a fuzzy interval is a singleton, it is referred to as a fuzzy number.
Equation \eqref{eq:convexity} and \eqref{eq:unicity} are known to be the convexity and unicity properties respectively.

The most convenient form of the membership function of a fuzzy number is a triangular form. It can be shown that such a membership function $\mu_M$ for a fuzzy number $M$ is convex and normalized. Three real values, denoted by $a$, $b$ and $D$, suffice to represent a triangular membership function of a fuzzy number and in this work, a fuzzy number defined as such will be noted as $\left[D, a, b \right]$. Here $D$ is the core of $M$. $D-a$ and $D+b$ are respectively the lower and higher bounds of the possibility distribution.
% \begin{itemize}
% \item
% $D$ denotes the single value in the core of $M$
% \item
% $D-a$ is then $\inf \{u \in \mathbb{R} : \mu_{M}(u) > 0\}$
% \item
% $D+b$ is then $\sup \{u \in \mathbb{R} : \mu_{M}(u) > 0\}$
% \end{itemize}

%%
%% Estructure: 
%% 2.3 The IKC framework.
%%.2.4 Representation of time intervals: Table with the IKC.


\subsection{\label{subsec:ikc-framework}The ill-known constraint framework}
A constraint is a restriction in the values that a given variable can take. An ill-known constraint is a constraint applied on a ill-known value~\cite{Pons2011}. More formally, an ill-known constraint is defined as follows.
\begin{definition}
Given a universe $U$, an ill-known constraint $C$ on a set $A \subseteq U$ is specified by means of a binary relation $R \subseteq U^{2}$ and a fixed, ill-known value denoted by its possibilistic variable $V$ over $U$, i.e.:
\begin{align}
C \triangleq (R,V)
\end{align}
Set $A$ now satisfies the constraint if and only if:
\begin{align}
\forall a \in A : (a,V) \in R
\end{align}
\end{definition}
A possibility distribution $\pi_{V}$ is defined on the variable $V$. Then, the  possibility and necessity that $A$ satisfies $C$ is computed by:

\begin{align}
\Pos(A\text{ sat. }C) & = \min_{a \in A}\left(\sup_{(a,w) \in R}\pi_{V}(w)\right) \label{ill-known-pos}\\
\Nec(A\text{ sat. }C) & = \min_{a \in A}\left(\inf_{(a,w) \notin R} 1-\pi_{V}(w)\right) \label{ill-known-nec}
\end{align}

For example, consider an ill-known value $X$ given by a triangular possibility distribution $\left[15, 1, 1\right]$. The ill-known contraint for all the points greater than $X$ is given by $C \triangleq (>, X)$. See Figure \ref{fig:ikc-greater}.
 
\begin{figure}[h]
   \centering
   \includegraphics[scale=1.5]{graphs/gt.eps}
   \caption{An ill-known value $X = \left[15, 1, 1\right]$ and an ill-known contraint $C \triangleq (>, X)$. }
   \label{fig:ikc-greater}
 \end{figure}


Several ill-known constraints can be aggregated by using boolean operators: and ($\wedge$), or ($\vee$), not ($\neg$). The possibility and neccesity for these operators are computed as follows. 

\begin{align}
\Pos(C_1 \wedge \ldots \wedge C_n) & = \min_{i= 1}^{n} \left(\Pos(C_i)\right) \label{and-ill-known-pos}\\
\Nec(C_1 \wedge \ldots \wedge C_n) & = \min_{i= 1}^{n} \left( \Nec(C_i )\right) \label{and-ill-known-nec}\\
%\end{align}
%\begin{align}
\Pos(C_1 \vee \ldots \vee C_n) & = \max_{i= 1}^{n} \left(\Pos(C_i)\right) \label{or-ill-known-pos}\\
\Nec(C_1 \vee \ldots \vee C_n) & = \max_{i= 1}^{n} \left( \Nec(C_i )\right) \label{or-ill-known-nec}\\
%\end{align}
%\begin{align}
\Pos( \neg C) & =  \left(1-\Nec(C)\right) \label{not-ill-known-pos}\\
\Nec(\neg C) & = \left(1- \Pos(C)\right) \label{not-ill-known-nec}
\end{align}


 \begin{figure}[h]
   \centering
   \includegraphics[scale=1.5]{graphs/ill-known-ti.eps}
   \caption{An ill-known time interval $J = \left[X, Y  \right]$ given by two ill-known values. }
   \label{fig:ill-known-ti}
 \end{figure}


An ill-known time interval is defined by two ill-known values (see Figure \ref{fig:ill-known-ti}). Therefore, both starting and ending points are not precissely known. The following is the notation for an ill-known time interval.

\begin{align}
\label{eq:ill-known-time-interval}
J = \left[X, Y \right] 
\end{align}

Where both $X$ and $Y$ are ill-known time values.


The Allen's Relations between a crisp time interval $I = [a,b]$ ($a, b$ are crisp time points) and an ill-known time interval given by $J = [X,Y]$ ($X, Y$ are ill-known values, see Definition \ref{def:ill-known-value}) can be defined by using aggregations of ill-known constraints. Table \ref{tab:allen-relations} shows the corresponding ill-known constraints for each Allen's Relation. These ill-known constraints are aggregated by using the equations \eqref{and-ill-known-pos} to \eqref{not-ill-known-nec}.



\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|}
\hline
Allen Relation & Constraints & Aggregation \\
\hline
I before J & $C_1\stackrel{\triangle}{=} \left(<,X\right)$ & $C_1(I)$ \\
\hline
\multirow{4}{*}
{I equal J} & $C_1\stackrel{\triangle}{=} \left(\geq,X\right)$ & $C_1(I)\wedge$\\
 & $C_2\stackrel{\triangle}{=} \left(\neq,X\right)$ & $\neg C_2(I)\wedge$\\
 & $C_3\stackrel{\triangle}{=} \left(\leq,Y\right)$ &  $C_3(I)\wedge$ \\
 & $C_4\stackrel{\triangle}{=} \left(\neq,Y\right)$ & $\neg C_4(I)$\\
\hline
\multirow{2}{*}
{I meets J} & $C_1\stackrel{\triangle}{=} \left(\leq,X\right)$ & $C_1(I)\wedge$\\
 & $C_2\stackrel{\triangle}{=} \left(\neq,X\right)$ & $\neg C_2(I)$\\
\hline
\multirow{3}{*}
{I overlaps J} & $C_1\stackrel{\triangle}{=} \left(<,Y\right)$ & $C_1(I)\wedge$\\
 & $C_2\stackrel{\triangle}{=} \left(\leq,X\right)$ & $\neg C_2(I)\wedge$\\
 & $C_3\stackrel{\triangle}{=} \left(\geq,X\right)$ & $\neg C_3(I)$\\
\hline
\multirow{4}{*}
{I during J} & $C_1\stackrel{\triangle}{=} \left(>,X\right)$ & $\big(C_1(I)\wedge$\\
 & $C_2\stackrel{\triangle}{=} \left(\leq,Y\right)$ & $ C_2(I)\big)\vee$ \\
 & $C_3\stackrel{\triangle}{=} \left(\geq,X\right)$ & $\big(C_3(I)\wedge$ \\
 & $C_4\stackrel{\triangle}{=} \left(<,Y\right)$ & $C_4(I)\big)$\\
\hline
\multirow{2}{*}
{I starts J} & $C_1\stackrel{\triangle}{=} \left(\geq,X\right)$ & $C_1(I)\wedge$\\
 &  $C_2\stackrel{\triangle}{=} \left(\neq,X\right)$ & $\neg C_2(I)$\\
\hline
\multirow{2}{*}
{I finishes J} & $C_1\stackrel{\triangle}{=} \left(\leq,Y\right)$ & $C_1(I)\wedge$\\
 & $C_2\stackrel{\triangle}{=} \left(\neq,Y\right)$ & $\neg C_2(I)$\\
\hline
\end{tabular}
\caption{Allen's relations represented in the framework.}
\label{tab:allen-relations}
\end{table}

% \subsection{\label{subsec:ill-known-time-interval}Ill-known time intervals}
% The representation of an ill-known time interval is made by using two ill-known values. Therefore, both starting and ending points are not precissely known. Usually, a crisp interval $[a, b]$ is defined by using a constraint ($a \leq b$). In the case of ill-known intervals, an ill-known constraint is defined.

%%%
%%% Define ill-known time interval in an informal way.
%%%
%%%




% \subsection{Interval Evaluation by Ill-known Constraints}
% The problem of interval evaluation is more generally explained in \cite{Pons2011}: the need exists to know if all points in a crisp interval $I$ reside between the boundaries of an ill-known interval $\left[ X , Y \right]$. In \cite{Pons2011}, the notion of an \emph{ill-known constraint} is introduced:
% 
% \begin{definition}
% Given a universe $U$, an ill-known constraint $C$ on a set $A \subseteq U$ is specified by means of a binary relation $R \subseteq U^{2}$ and a fixed, ill-known value denoted by its possibilistic variable $V$ over $U$, i.e.:
% \begin{align}
% C \triangleq (R,V)
% \end{align}
% Set $A$ now satisfies the constraint if and only if:
% \begin{align}
% \forall a \in A : (a,V) \in R
% \end{align}
% \end{definition}
% 
% An example of an ill-known constraint is $C_{ex} \triangleq (<, X)$. Some set $A$ then satisfies $C_{ex}$ if $\forall a \in A : a < X$, given possibilistic variable $X$.
% 
% The satisfaction of a constraint $C \triangleq (R,V)$ by a set $A$ is basically still a Boolean matter, but due to the uncertainty about the ill-known value $V$, it can be uncertain whether $C$ is satisfied by $A$ or not \cite{Pons2011}. In fact, this satisfaction now behaves as a proposition. Based on the possibility distribution $\pi_{V}$ of $V$, the possibility and necessity that $A$ satisfies $C$ can be found. This proposition can thus be seen as a possibilistic variable on $\mathbb{B}$. The required possibility and necessity are:
% 
% \vspace{-10pt}
% 
% \begin{align}
% \Pos(A\text{ satisfies }C) & = \min_{a \in A}\left(\sup_{(a,w) \in R}\pi_{V}(w)\right) \label{ill-known-pos}\\
% \Nec(A\text{ satisfies }C) & = \min_{a \in A}\left(\inf_{(a,w) \notin R} 1-\pi_{V}(w)\right) \label{ill-known-nec}
% \end{align}
% 
% Now, e.g., to check if crisp interval $I = \left[j, k\right]$ is included in $\left[X, Y\right]$, 2 ill-known constraints are constructed:
% 
% \vspace{-10pt}
% 
% \begin{eqnarray}
% C_1 & \triangleq\left(\geq,X\right)\\
% C_2 & \triangleq\left(\leq,Y\right)
% \end{eqnarray}
% 
% To calculate the possibility and necessity concerning a conjunction of constraints, the $\min$ operator can be used. The possibility and necessity of $I$ being included in $\left[X, Y\right]$ are now: 
% 
% \vspace{-10pt}
% 
% \begin{align}
% \label{eq:interval-pos}
% \Pos(I\text{ satisfies }C_1\ and\ C_2) & = \min_{a \in I}\left(\sup_{a \geq w}\pi_{X}(w),\sup_{a \leq v}\pi_{Y}(v)\right)\\
% \label{eq:interval-nec}
% \Nec(I\text{ satisfies }C_1\ and\ C_2) & = \min_{a \in I}\left(\inf_{a < w} 1-\pi_{X}(w),\inf_{a > v} 1-\pi_{Y}(v)\right).
% \end{align}

\subsection{\label{subsec:triangular-model}The triangular model}

\subsection{\label{subsec:uncertainty-about-time-intervals}Uncertainty about Time Intervals}
Time is a complex natural phenomenon that, among others, allows humans to organise life and plan activities. Time also plays an important role in information management as it allows to register facts with different kinds of timestamps and make use of these timestamps during querying and information retrieval. Dealing with time in an information system requires a time model. In this paper, it is implicitly assumed that time is modelled as being discrete, linear and finite. This means that it is considered that time can only be/ observed using a limited precision, say $\delta$. Observing time using a maximum precision $\delta$ and with respect to a given origin $t_0$ involves a crisp discrete (countable) set of time points, given by
\begin{equation}
 \label{eq:t0-delta}
T_{0,\delta} = \lbrace t_K \in T | t_k = t_0 + k\delta, k \in \Z \rbrace
\end{equation}

where $Z = \left \lbrace 0, 1, -1, 2, -2, \ldots \rbrace \right. T_{0, \delta}$ is a proper subset of the continuum $T$ of the physical time points. The discretisation can be described as a surjective mapping from $T$ on $T_{0,\delta}$, which maps each $\tau \in T$ on the element $t_k \in T_{0,\delta}$ that lies in the interval
\begin{equation}
\gamma_{0,k} = \left[ t_0 + k\delta, t_0 + (k+1)\delta \right[, k \in \Z 
\end{equation}

Discretisation implies that all time points within an interval $\gamma_{0,k}$ are considered to be indistinguishable and mapped to the same time point $t_k$. This is not really a limitation, on condition that the precision $\delta$ is chosen sufficiently accurate. The discretisation is necessary to circumvent the density problem (i.e., the fact that between any two distinct points, there always exists at least one other point). Linearity implies a total order over the time points. Finally, our model is chosen to be finite in view of a computer representation. This implies that all values that exceed the determined upper and lower bound will be handled by introducing two special values $(- \infty $ and  $+\infty)$.

The intervals $\gamma_{0,k}$ with $\delta$ as length are usually called `chronons' in literature (cf. \cite{Dyreson1994}). The introduction of chronons eliminates the necessity of making a distinction between points and intervals, because even a chronon, the smallest unit in the model, is essentially an interval. 

A time interval $\left[t_s, t_e \right]$ is defined by a start time point $t_s$  and a length $l$, which defines the distance (number of chronons) from ts to the end time point $t_e$, i.e., $l = t_e - t_s$.


A time point is equivalent to a time interval with $l = 0$ (or $t_e = t_s$ ). Note that the length of an interval is not the same as the duration of the interval: the length of a time point is 0, its duration is 1 chronon ($\delta$). 

In practice, it often occurs that time intervals cannot be exactly specified. Especially, in historical data it is often the case that either the starting date or the ending date (or both) of a time interval are partially or completely unknown. In such cases, the best thing to do is modelling the available knowledge about (the uncertainty of) the interval as accurate as possible, hereby avoiding information loss. Soft computing techniques, more specifically possibility theory \cite{DidierDubois1988a}, can be used for that purpose. In \cite{Billiet2012}, \cite{JoseEnriquePons2012} a possibilistic valid time model able to cope with time intervals that have an uncertain start and/or end point has been presented. The basics of this model are used in this paper and briefly described as follows. Each (Un)certain Time Interval (UTI) is defined by a pair
\begin{equation}
 \label{eq:uncertain-time-interval}
\left(\pi_s, \pi_e \right)
\end{equation}

where $\pi_s$ and $\pi_e$ are two convex possibility distributions, respectively reflecting the knowledge about the start and end point of the UTI (as illustrated in Fig. \ref{}(a)). In case of certainty, the possibility distribution is characterised by a fuzzy set with singleton support and core containing the crisp date. In case of uncertainty, the possibility distribution is characterised by a fuzzy set containing all possible candidate values for the date and their associated degree of possibility. 
% figura 2

Together, both possibility distributions reflect the available knowledge about the start and end of the UTI they model. This implies that $\pi$s and $\pi$e together represent another possibility distribution $\pi$I consisting of all possible time intervals that can be constructed from $\pi$s and $\pi$e . Some of the intervals in $\pi_I$ are depicted in Fig. \ref{}(b). For each time interval $\left[t_s , t_e \right]$, its associated possibility grade in $\pi_I$ is computed by
\begin{equation}
 \label{eq:possibility-uti}
\pi_{I} \left(\left[t_s, t_e\right] \right) = 
\begin{cases}
 \min \left(\pi_s (t_s), \pi_e (t_e) \right), & \mbox{ if } t_s \leq t_e\\
0, & \mbox{ otherwise. }
\end{cases}
\end{equation}

Eq. \eqref{eq:possibility-uti} reflects that given the uncertainty about the start point, modelled by $\pi$s and the uncertainty about the end point, modelled by $\pi_e$ $\pi$e , the possibility that $\left[t_s, t_e \right]$ is the actual value of the UTI equals the possibility that ts is the actual start point (i.e., $\pi_s (t_s)$) and te is the actual end point (i.e., $\pi_e (t_e)$) of $I$, where the conjunction of both conditions is modelled by the minimum t-norm. In the inconsistent case where $t_s > t_e$ the interval is considered to be completely impossible. In the remainder of this paper we will denote an UTI as $\pi_I$, i.e., $\pi_I = \left( \pi_s, \pi_e \right)$.



\subsection{\label{subsec:the-triangular-model}The triangular model}
Mainly due to its linear characteristic, time is traditionally visualised using a linear representation where several time intervals are depicted as linear segments on top of a horizontal time axis. This approach has also been used in Fig. \ref{}(b). One can read the start and end point of each interval the horizontal scale. The vertical dimension is solely used to differentiate multiple overlapping intervals, if used at all. The linear representation works well as long as the number of represented time intervals remains low. As soon as a large number of overlapping intervals have to be represented the representation becomes overloaded and accurate visual data analysis becomes almost impossible.

For that reason, an alternative Triangular time Model (TM) has been presented in \cite{Weghe2007}. This model is an extension of Kulpa's triangular model for the modelling of crisp time intervals \cite{Kulpa1997}. Basically, intervals are modelled as interval points in a two-dimensional space as follows. First, a horizontal time axis is considered. Second, for each time interval $\left[t_s, t_e \right]$ two straight lines $L_s$ and $L_e$ are constructed as depicted in Fig. \ref{}. Line $L_s$ is passing through $t_s$ and makes a fixed angle $\alpha$ with the horizontal time axis, whereas Le is passing through te making a fixed angle $-\alpha$ with the horizontal time axis. The interval $\left[t_s, t_e \right]$ is then represented by the intersection of $L_s$ and $L_e$ , which is called the interval point of $\left[t_s, t_e \right]$. For the ease of use, $\alpha$ is here chosen to be $45^{\circ}$ . In TM all time intervals are represented by their corresponding interval point. So, because $\alpha$ is fixed for all interval points, the position of the interval point completely determines the start and end of the interval. The two-dimensional space of interval points is called the interval space and is denoted by IR \cite{Kulpa2006}.

%Figure 3

From the observation that the start points and end points of two crisp time intervals $I^{1} = \left[t_s^1, t_e^1 \right]$ and $I^2 = \left[t_s^2, t_e^2 \right]$ can be smaller than ($<$), equal to ($=$) or larger than ($>$) each other, Allen proposed the thirteen possible relations between two crisp time intervals given in Table \ref{} \cite{Allen1983}.

In TM, these thirteen Allen relations each correspond to a specific zone in the interval space IR \cite{Kulpa1997}. These thirteen zones are called Crisp Relational Zones (CRZs). The CRZs with respect to a reference interval point $I$ are depicted in Fig. \ref{}. Hereby, the following shorthand notations are used: equals (E), starts (S), started by (SB), finishes (F ), finished by (F B), meets (M ), met by (M B), overlaps (O), overlapped by (OB), during (D), contains (C), before (B) and after (A).

% TABLE I
% T HE THIRTEEN POSSIBLE A LLEN RELATIONS BETWEEN CRISP TIME
% INTERVALS
% 
% I 1 equals I 2
% I 1 starts I 2
% I 1 started by I 2
% I 1 f inishes I 2
% I 1 f inished by I 2
% I 1 meets I 2
% I 1 met by I 2
% I 1 overlaps I 2
% I 1 overlapped by I 2
% I 1 during I 2
% I 1 contains I 2
% I 1 bef ore I 2
% I 1 af ter I 2

Each CRZ represents the set of interval points of the crisp time intervals that are in the corresponding Allen relation with respect to the reference interval $I$. For example, all interval points of intervals that come before $I$ are located in the CRZ represented by the leftmost lower triangle in the interval space. Likewise, if an interval point is located in the top quadrangle above $I$, then its corresponding interval contains $I$. CRZs allow to visually analyse relations between (large) sets of interval points.